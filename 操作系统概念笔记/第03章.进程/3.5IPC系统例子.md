## 3.5系统例子

### 3.5.1 POSIX共享内存

POSIX是电气与电子工程师协会（Institute of Electrical and Electronics Engineers,简称IEEE）发布的一个标：可移植操作系统接口（Portable Operating System Interface of UNIX，缩写为 POSIX ）

这套标准涵盖了很多方面，比如Unix系统调用的C语言接口、shell程序和工具、线程及网络编程。POSIX标准定义了操作系统应该为应用程序提供的接口标准。

书上的代码在编译的时候需要加上 -lrt参数在能通过，据说是连接到什么实时扩展库。这个库提供对shm_open等API的支持，否则系统会提示： undefined reference to `shm_open'

默认情况下，Linux上的gcc编译器支持的是SYSTEM V的API标准。二者在进程通信的接口API定义的不一样。

代码自己可以试着输入运行一下

### 3.5.2Mach

没接触，没例子

但是书中提到，mach中，邮箱称为端口，突然有种茅塞顿开的感觉，想起了3.4.2.1小结里面一些疑惑的问题。如果端口就是邮箱，邮箱就是端口，那么3.4.2.1里面，邮箱通信的三个特点就有了直观的感受（这里说的是软端口，非硬件连接的端口）。这三点如下：

这种通信具有如下特点：

1. <mark>两个进程共享同一个邮箱才可通信</mark>

2. <mark>一个链路可以与两个或更多进程相关联（书中假设的P1，P2，P3共享一个邮箱A的例子，我认为就是对这种情况的进一步分析）</mark>

3. <mark>两个进程间可以有多个不同的链路，每个链路对应于一个邮箱，这样子就会存在多个邮箱</mark>。

1）两个进程共享同一个邮箱才可通信：相互通信的进程，必须要通过相同的端口，比如浏览器访问网络服务器的80端口获取数据，或者通过80端口上传文件到服务器。

2）一个链路可以与两个或者更多的进程相关联：比如我们可以开多个浏览器，访问同一网站的80端口，服务器进程从80端口（或者说是消息邮箱）的连接请求队列里面，处理一个个的连接请求。

3）两个进程间可以有不同的链路，每个链路对应于一个邮箱：比如web服务器软件ngix等，可以开多个端口，每个端口提供不同的服务：80端口提供web网页服务，8081端口可以提供网站后台管理网页的服务。浏览器可以访问两个端口，获取不同的服务。
